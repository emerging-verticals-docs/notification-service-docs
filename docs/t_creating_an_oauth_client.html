
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
<head><meta name="description" content="You can create OAuth2 clients with specific permissions for your application to work with Predix Platform services. Often this is the first step after creating an instance of a service. When you ..."></meta><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><meta name="copyright" content="(C) Copyright 2005"></meta><meta name="DC.rights.owner" content="(C) Copyright 2005"></meta><meta name="DC.Type" content="task"></meta><meta name="DC.Title" content="Creating an OAuth2 Client"></meta><meta name="abstract" content="You can create OAuth2 clients with specific permissions for your application to work with Predix Platform services. Often this is the first step after creating an instance of a service."></meta><meta name="description" content="You can create OAuth2 clients with specific permissions for your application to work with Predix Platform services. Often this is the first step after creating an instance of a service."></meta><meta name="DC.Format" content="XHTML"></meta><meta name="DC.Identifier" content="task_79a81b74-552e-4f74-abfc-bd37e6adac87"></meta><meta name="DC.Language" content="en-US"></meta><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>Creating an OAuth2 Client</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/skins/skin.css"><!----></link><script type="text/javascript"><!--
          
          var prefix = "index.html";
          
          --></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="task_79a81b74-552e-4f74-abfc-bd37e6adac87">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td width="75%"></td><td><div class="navheader"></div></td></tr></tbody></table>
<h1 class="title topictitle1">Creating an OAuth2 Client</h1>
<div class="body taskbody"><p class="shortdesc">You can create OAuth2 clients with specific permissions for your application to work with Predix Platform services. Often this is the first step after creating an instance of a service. </p>
<div class="section context">
            <p class="p">When you create an instance of UAA, the UAA Dashboard is available for configuring that instance of UAA. You can use the Client Management tab in the UAA Dashboard to create the OAuth2 clients.  </p>

            
        </div>
<ol class="ol steps"><li class="li step stepexpand"><span class="ph cmd">In the Predix.io Console view, select the Space where your services are located.</span></li>
<li class="li step stepexpand"><span class="ph cmd">In the Services Instances page, select the UAA instance to configure.</span></li>
<li class="li step stepexpand"><span class="ph cmd">Select the <span class="ph uicontrol">Configure Service Instance</span> option.</span></li>
<li class="li step stepexpand"><span class="ph cmd">In the UAA Dashboard login page, specify your admin client secret and click <span class="ph uicontrol">Login</span>.</span></li>
<li class="li step stepexpand"><span class="ph cmd">In UAA Dashboard, select the <span class="ph uicontrol">Client Management</span> tab.</span><div class="itemgroup info">The Client Management tab has two sections, <span class="ph uicontrol">Clients</span> and <span class="ph uicontrol">Service Instances</span>. The <span class="ph uicontrol">Service Instances</span> section displays the service instances that you have created for your services.<div class="note note"><span class="notetitle">Note:</span> The service instances displayed here were created while using the UAA that you are trying to configure. Service instances that you created using other UAA instances are not displayed on this page.</div>
</div></li>
<li class="li step stepexpand"><span class="ph cmd">Click <span class="ph uicontrol">Create Client</span> to open the <span class="ph uicontrol">Create Client</span> form.</span></li>
<li class="li step stepexpand"><span class="ph cmd">Complete the <span class="ph uicontrol">Create Client</span> form.</span><div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_79a81b74-552e-4f74-abfc-bd37e6adac87__table_ehl_3rb_1x" class="table" frame="border" border="1" rules="all"><thead class="thead" align="left"><tr class="row"><th class="entry" valign="top" width="27.70083102493075%" id="d15143e77">Field</th>
<th class="entry" valign="top" width="72.29916897506925%" id="d15143e79">Description</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry" valign="top" width="27.70083102493075%" headers="d15143e77 "><span class="ph uicontrol">Client ID</span></td>
<td class="entry" valign="top" width="72.29916897506925%" headers="d15143e79 ">Specify a name for the OAuth2 client you are creating.</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="27.70083102493075%" headers="d15143e77 "><span class="ph uicontrol">Authorized Grant Types</span></td>
<td class="entry" valign="top" width="72.29916897506925%" headers="d15143e79 ">Choose one or more of the following grant types:<ul class="ul" id="task_79a81b74-552e-4f74-abfc-bd37e6adac87__ul_pyf_jnq_rw"><li class="li"><span class="ph uicontrol">authorization_code</span><p class="p">When you use the authorization code grant type, the client directs the resource owner to UAA, which in turn directs the resource owner back to the client with the authorization code. </p>
</li>
<li class="li"><span class="ph uicontrol">client_credentials</span><p class="p">When you use the client credentials grant type, the OAuth2 endpoint in UAA accepts the client ID and client secret and provides Access Tokens.</p>
</li>
<li class="li"><span class="ph uicontrol">password</span><p class="p">When you use the resource owner password credentials grant type, the OAuth2 endpoint in UAA accepts the username and password and provides Access Tokens.</p>
</li>
<li class="li"><span class="ph uicontrol">refresh_token</span><p class="p">The refresh tokens are credentials used to obtain access tokens. You can choose this option to obtain refresh token from UAA. You can then use the refresh token to obtain a new access token from UAA when the current access token becomes invalid or expires, or to obtain additional access tokens with identical or narrower scope.</p>
</li>
<li class="li"><span class="ph uicontrol">implicit</span><p class="p">When you use the implicit grant type, UAA directly issues an Access Token to the client without authenticating the client. This reduces the number of round trips required to obtain an access token. </p>
</li>
</ul>
<p class="p">For more information on grant types, see <a class="xref" href="https://tools.ietf.org/html/rfc6749" target="_blank">RFC 6749</a>.</p>
</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="27.70083102493075%" headers="d15143e77 "><span class="ph uicontrol">Client Secret</span></td>
<td class="entry" valign="top" width="72.29916897506925%" headers="d15143e79 ">Specify the password. It is important that you keep a note of this password. If lost, this password cannot be retrieved.</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="27.70083102493075%" headers="d15143e77 "><span class="ph uicontrol">Confirm Client Secret</span></td>
<td class="entry" valign="top" width="72.29916897506925%" headers="d15143e79 ">Reenter the client secret.</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="27.70083102493075%" headers="d15143e77 "><span class="ph uicontrol">Redirect URI</span></td>
<td class="entry" valign="top" width="72.29916897506925%" headers="d15143e79 ">Specify a redirect URI to redirect the client after login (for example, <samp class="ph codeph">http://example-app.com/welcome</samp>).<p class="p">Use this URI when you start using UAA as the service provider for your external Identify provider.</p>
</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="27.70083102493075%" headers="d15143e77 "><span class="ph uicontrol">Scopes</span></td>
<td class="entry" valign="top" width="72.29916897506925%" headers="d15143e79 ">Scopes are permissions associated with an OAuth Client to determine user acces to a resource through an application. The user permissions are for authorization grant types <samp class="ph codeph">authorization_code</samp>, <samp class="ph codeph">password</samp> and <samp class="ph codeph">implicit</samp>..<p class="p">By default, the admin client is assigned all required scopes. For a new client, an administrator can select the scopes to be added based on client requirements.</p>
<p class="p">For a list of available scopes, see <a class="xref" href="https://github.com/GESoftware-CF/uaa/blob/master/docs/UAA-APIs.rst#scopes-authorized-by-the-uaa" target="_blank">Scopes Authorized by the UAA</a>.</p>
<p class="p">To use an OAuth2 client for your Predix Platform service instance, you must <a class="xref" href="t_updating_oauth2_client.html#task_k3h_k2c_1x" title="To use an OAuth2 client for secure access to your Predix Platform service instance from your application, you must update your OAuth2 client to add additional authorities or scopes that are specific to each service.">update your OAuth2 client</a> to add <a class="xref" href="r_authorities_or_scopes_required_for_services.html#reference_ec1_t3d_bx">scopes that are specific to each service</a> after adding the client to the service instance. </p>
</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="27.70083102493075%" headers="d15143e77 "><span class="ph uicontrol">Authorities</span></td>
<td class="entry" valign="top" width="72.29916897506925%" headers="d15143e79 ">Authorities are permissions associated with the OAuth Client when an application or API is acting on its own behalf to access a resource with its own credentials, without user involvement. The permissions are for the <samp class="ph codeph">client_credentials</samp> authorization grant type.<p class="p">By default, the admin client is assigned all required authorities. For a new client, an administrator can select the authorities to be added based on client requirements.</p>
<p class="p">The list of authorities matches the list of scopes. For a list of available UAA scopes, see <a class="xref" href="https://github.com/GESoftware-CF/uaa/blob/master/docs/UAA-APIs.rst#scopes-authorized-by-the-uaa" target="_blank">Scopes Authorized by the UAA</a>.</p>
<p class="p">To use an OAuth2 client for your Predix Platform service instance, you must <a class="xref" href="t_updating_oauth2_client.html#task_k3h_k2c_1x" title="To use an OAuth2 client for secure access to your Predix Platform service instance from your application, you must update your OAuth2 client to add additional authorities or scopes that are specific to each service.">update your OAuth2 client</a> to add <a class="xref" href="r_authorities_or_scopes_required_for_services.html#reference_ec1_t3d_bx">authorities that are specific to each service</a> after adding the client to the service instance.</p>
<div class="note note"><span class="notetitle">Note:</span> 
                                            <p class="p">An admin client is not assigned the default authority to change the user password. To change the user password, you must add the <samp class="ph codeph">uaa.admin</samp> authority to your admin client. </p>

                                        </div>
</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="27.70083102493075%" headers="d15143e77 "><span class="ph uicontrol">Auto Approved Scopes</span></td>
<td class="entry" valign="top" width="72.29916897506925%" headers="d15143e79 ">Specify scopes that can be approved automatically for the client without explicit approval from a resource owner.</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="27.70083102493075%" headers="d15143e77 "><span class="ph uicontrol">Allowed Providers</span></td>
<td class="entry" valign="top" width="72.29916897506925%" headers="d15143e79 ">Specifies the names of the external identity providers, if any. This field is required if you are using external identity providers with UAA as a service provider.</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="27.70083102493075%" headers="d15143e77 "><span class="ph uicontrol">Access Token Validity</span></td>
<td class="entry" valign="top" width="72.29916897506925%" headers="d15143e79 ">Specifies the access-token expiration time in ms. </td>
</tr>
<tr class="row"><td class="entry" valign="top" width="27.70083102493075%" headers="d15143e77 "><span class="ph uicontrol">Refresh Token Validity</span></td>
<td class="entry" valign="top" width="72.29916897506925%" headers="d15143e79 ">Specifies the refresh-token expiration time in ms.</td>
</tr>
</tbody>
</table>
</div>

                </div></li>
</ol>
<div class="section postreq">
            <p class="p">
                <a class="xref" href="t_updating_oauth2_client.html#task_k3h_k2c_1x" title="To use an OAuth2 client for secure access to your Predix Platform service instance from your application, you must update your OAuth2 client to add additional authorities or scopes that are specific to each service.">Updating the OAuth2 Client for Services</a> for your service specific information. </p>

        </div>
</div>
<div class="topic task nested1" id="task_m5w_dld_rw"><h2 class="title topictitle2">Using UAAC to Create an OAuth2 Client</h2>
<div class="body taskbody"><p class="shortdesc">You can use the UAA command-line interface (UAAC) instead of UAA Dashboard to create an OAuth2 client. </p>
<div class="section context">
                <p class="p">You can use the UAAC, to manage your UAA instance. For more information on installing the command-line interface, see <a class="xref" href="https://github.com/cloudfoundry/cf-uaac" target="_blank">https://github.com/cloudfoundry/cf-uaac</a>.</p>

            </div>
<ol class="ol steps" id="task_m5w_dld_rw__steps_crw_2ld_rw"><li class="li step stepexpand"><span class="ph cmd">Specify your UAA instance as the intended target.</span><div class="itemgroup info">
                        <pre class="pre codeblock">uaac target &lt;uaa_instance_url&gt; </pre>

                        <p class="p"><samp class="ph codeph">&lt;uaa_instance_url&gt;</samp> is the URL to your trusted issuer, for example, <samp class="ph codeph">https://11fa0273-9e2a-37e2-9d06-2c95a1f4f5ea.predix-uaa.run.aws-usw02-pr.ice.predix.io</samp>. You can retrieve this URL from the VCAP_SERVICES environment variable after binding your UAA instance to an application. </p>

                    </div></li>
<li class="li step stepexpand"><span class="ph cmd">Log in using the administrative client.</span><div class="itemgroup info">
                        <pre class="pre codeblock">uaac token client get admin</pre>

                    </div></li>
<li class="li step stepexpand"><span class="ph cmd">Specify the administrative client secret at the prompt.</span></li>
<li class="li step stepexpand"><span class="ph cmd">Use the following command to create the OAuth2 client:</span><div class="itemgroup info">
                        <pre class="pre codeblock">uaac client add [client_name] 
    --authorities "uaa.resource" 
    --scope "openid" 
    --autoapprove "openid" 
    --authorized_grant_types [authorization_code|implicit|password|client_credentials|refresh_token] 
    --redirect_uri [redirect_uri_1, redirect_uri_2, ...]</pre>

                        <p class="p">For more information on UAA options such as <samp class="ph codeph">scopes</samp> and <samp class="ph codeph">authorized_grant_types</samp>, see the UAA documentation at <a class="xref" href="https://github.com/GESoftware-CF/uaa/blob/master/docs/UAA-APIs.rst" target="_blank">https://github.com/GESoftware-CF/uaa/blob/master/docs/UAA-APIs.rst</a>.</p>

                    </div></li>
</ol>
</div>
</div>
<div class="navfooter"><!----></div><div class="footer"><a class="oxyFooter" href="" target="_blank"><span class="oXygenLogo"><img src="oxygen-webhelp/resources/img/GELogo1.jpg" height="36px" alt="General Electric"></img></span><span class="xmlauthor"> © 2015-2017 General Electric Company. All rights reserved.</span></a></div>
</body>
</html>