
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
<head><meta name="description" content="Example API requests for Predix Asset Audit History feature. Get Audit History for Assets for a Specific Collection This example uses the identifier parameter to retrieve the history for assets with ..."></meta><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><meta name="copyright" content="(C) Copyright 2005"></meta><meta name="DC.rights.owner" content="(C) Copyright 2005"></meta><meta name="DC.Type" content="reference"></meta><meta name="DC.Title" content="Example Audit History API Requests"></meta><meta name="abstract" content="Example API requests for Predix Asset Audit History feature."></meta><meta name="description" content="Example API requests for Predix Asset Audit History feature."></meta><meta name="DC.Format" content="XHTML"></meta><meta name="DC.Identifier" content="reference_rtt_q5l_5v"></meta><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>Example Audit History API Requests</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/skins/skin.css"><!----></link><script type="text/javascript"><!--
          
          var prefix = "index.html";
          
          --></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="reference_rtt_q5l_5v">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td width="75%"></td><td><div class="navheader"></div></td></tr></tbody></table>
<h1 class="title topictitle1">Example Audit History API Requests</h1>
<div class="body refbody"><p class="shortdesc"> Example API requests for Predix Asset Audit History feature.</p>
<div class="section"><h2 class="title sectiontitle">Get Audit History for Assets for a Specific Collection</h2>
      
      <div class="p">This example uses the <samp class="ph codeph">identifier</samp> parameter to retrieve the history for assets with <samp class="ph codeph">/locomotives*</samp> in the <samp class="ph codeph">uri</samp>.<pre class="pre codeblock"><var class="keyword varname">&lt;asset-app-url&gt;</var>/system/audit?filter=identifier=/locomotives*</pre>
</div>

    </div>
<div class="section"><h2 class="title sectiontitle">Returns</h2>
      
      <pre class="pre codeblock">[
  {
    "id": 789,
    "versionId": -1,
    "userId": "",
    "timestamp": "2016-04-13T10:16:42.016-07:00[America/Los_Angeles]",
    "reason": "",
    "action": "CREATE",
    "identifier": "/locomotives/89",
    "eventId": "",
    "masterEventId": "",
    "otherInfo": "",
    "oldValue": "{}",
    "newValue": "{\n  \"uri\": \"/locomotives/89\",\n  \"type\": \"Diesel-electric\",\n  \"model\": \"3GS21B-89\",\n  \"serial_no\": \"0086\",\n  \"emission_tier\": \"0+\",\n  \"fleet\": \"/fleets/cn-4\",\n  \"manufacturer\": \"/manufacturers/national-railway-equipment\",\n  \"engine\": \"/engines/QSK19-28\",\n  \"hqLatLng\": {\n    \"lat\": 46.244201,\n    \"lng\": -73.666786\n  },\n  \"parent\": \"/locomotives/88\",\n  \"installedOn\": \"05/12/2015\",\n  \"dateIso\": \"2015-12-05T13:15:31Z\"\n}"
  },
  {
    "id": 788,
    "versionId": -1,
    "userId": "",
    "timestamp": "2016-04-13T10:16:42.016-07:00[America/Los_Angeles]",
    "reason": "",
    "action": "CREATE",
    "identifier": "/locomotives/88",
    "eventId": "",
    "masterEventId": "",
    "otherInfo": "",
    "oldValue": "{}",
    "newValue": "{\n  \"uri\": \"/locomotives/88\",\n  \"type\": \"Diesel-electric\",\n  \"model\": \"3GS21B-88\",\n  \"serial_no\": \"0085\",\n  \"emission_tier\": \"0+\",\n  \"fleet\": \"/fleets/cn-4\",\n  \"manufacturer\": \"/manufacturers/national-railway-equipment\",\n  \"engine\": \"/engines/QSK19-27\",\n  \"hqLatLng\": {\n    \"lat\": 49.640363,\n    \"lng\": -126.242998\n  },\n  \"parent\": \"/locomotives/87\",\n  \"dateIso\": \"2015-11-05T13:15:30Z\"\n}"
  },
  {
    "id": 787,
    "versionId": -1,
    "userId": "",
    "timestamp": "2016-04-13T10:16:42.015-07:00[America/Los_Angeles]",
    "reason": "",
    "action": "CREATE",
    "identifier": "/locomotives/87",
    "eventId": "",
    "masterEventId": "",
    "otherInfo": "",
    "oldValue": "{}",
    "newValue": "{\n  \"uri\": \"/locomotives/87\",\n  \"type\": \"Diesel-electric\",\n  \"model\": \"3GS21B-87\",\n  \"serial_no\": \"0087\",\n  \"emission_tier\": \"0+\",\n  \"fleet\": \"/fleets/cn-4\",\n  \"manufacturer\": \"/manufacturers/national-railway-equipment\",\n  \"engine\": \"/engines/QSK19-26\",\n  \"hqLatLng\": {\n    \"lat\": 49.296307,\n    \"lng\": -118.827314\n  },\n  \"parent\": \"/locomotives/86\",\n  \"installedOn\": \"05/12/2014\",\n  \"dateIso\": \"2014-12-05T13:15:31Z\"\n}"
  },
  {
    "id": 786,
    "versionId": -1,
    "userId": "",
    "timestamp": "2016-04-13T10:16:42.015-07:00[America/Los_Angeles]",
    "reason": "",
    "action": "CREATE",
    "identifier": "/locomotives/86",
    "eventId": "",
    "masterEventId": "",
    "otherInfo": "",
    "oldValue": "{}",
    "newValue": "{\n  \"uri\": \"/locomotives/86\",\n  \"type\": \"Diesel-electric\",\n  \"model\": \"3GS21B\",\n  \"serial_no\": \"0086\",\n  \"emission_tier\": \"0+\",\n  \"fleet\": \"/fleets/cn-4\",\n  \"manufacturer\": \"/manufacturers/national-railway-equipment\",\n  \"engine\": \"/engines/QSK19-28\",\n  \"hqLatLng\": {\n    \"lat\": 46.244201,\n    \"lng\": -73.666786\n  }\n}"
  },
  
    {
    ... SNIP
]</pre>

    </div>
<div class="section"><h2 class="title sectiontitle">Get Audit History for a Specific Collection Before a Timestamp</h2>
      
      <div class="p">This example uses the <samp class="ph codeph">before</samp> parameter to retrieves the history for asset records matching <samp class="ph codeph">/planets/venus</samp> with changes before a specific timestamp.<pre class="pre codeblock">GET <var class="keyword varname">&lt;asset-app-url&gt;</var>/system/audit?filter=identifier=/planets/venus:before=2016-08-10T13\:09\:58.747-07\:00</pre>
</div>

    </div>
<div class="section"><h2 class="title sectiontitle">Response</h2>
      
      <pre class="pre codeblock">
[
  {
     "id": 608306,
     "versionId": -1,
     "timestamp": "2016-08-10T13:09:58.747-07:00[America/Los_Angeles]",
     "action": "UPDATE",
     "identifier": "/planets/venus",
     "eventTimestamp": "2016-08-10T13:09:58.747-07:00[America/Los_Angeles]",
     "oldValue": "{\n  \"uri\": \"/planets/venus\",\n  \"color\": \"gold\",\n  \"radius\": \"3,760 mi\"\n}",
     "newValue": "{\n  \"uri\": \"/planets/venus\",\n  \"color\": \"gold\",\n  \"radius\": \"3,760 mi\",\n  \"change\": 0\n}"
   },
   {
     "id": 608303,
     "versionId": -1,
     "timestamp": "2016-08-10T13:08:09.119-07:00[America/Los_Angeles]",
     "action": "CREATE",
     "identifier": "/planets/venus",
     "eventTimestamp": "2016-08-10T13:08:09.119-07:00[America/Los_Angeles]",
     "oldValue": "{}",
     "newValue": "{\n  \"uri\": \"/planets/venus\",\n  \"color\": \"gold\",\n  \"radius\": \"3,760 mi\"\n}"
   }\]
</pre>

    </div>
<div class="section"><h2 class="title sectiontitle">Get Audit History for a Specific Collection After a Timestamp</h2>
      
      <div class="p">This example uses the <samp class="ph codeph">after</samp> parameter to retrieves the history for asset records matching <samp class="ph codeph">/planets/venus</samp> with changes before a specific timestamp.<pre class="pre codeblock">GET <var class="keyword varname">&lt;asset-app-url&gt;</var>/system/audit?filter=identifier=/planets/venus:after=2016-08-10T13\:09\:58.747-07\:00</pre>
</div>

    </div>
<div class="section"><h2 class="title sectiontitle">Response</h2>
      
      <pre class="pre codeblock"></pre>

    </div>
<div class="section"><h2 class="title sectiontitle">GET a Specific Number of Changed Records</h2>
            
            <div class="p">This example uses the <samp class="ph codeph">changes</samp> and <samp class="ph codeph">pagesize</samp> parameters to retrieve the detailed changes for three asset records.<pre class="pre codeblock"><var class="keyword varname">&lt;asset-app-url&gt;</var>/system/audit/changes?pageSize=3</pre>
</div>

        </div>
<div class="section"><h2 class="title sectiontitle">Returns</h2>
            
            <pre class="pre codeblock" id="reference_rtt_q5l_5v__codeblock_8249a2a5-069e-47f1-9ee4-544087facc00">[
  {
    "id": 3293,
    "versionId": -1,
    "userId": "",
    "timestamp": "2016-04-13T10:18:43.296-07:00[America/Los_Angeles]",
    "reason": "",
    "action": "CREATE",
    "identifier": "/engines/QSK19-28",
    "eventId": "",
    "masterEventId": "",
    "otherInfo": "",
    "elementAction": "added",
    "elementUri": "/engines/QSK19-28.manufacturer",
    "elementOldValue": "",
    "elementNewValue": "/manufacturers/cummins"
  },
  {
    "id": 3292,
    "versionId": -1,
    "userId": "",
    "timestamp": "2016-04-13T10:18:43.296-07:00[America/Los_Angeles]",
    "reason": "",
    "action": "CREATE",
    "identifier": "/engines/QSK19-28",
    "eventId": "",
    "masterEventId": "",
    "otherInfo": "",
    "elementAction": "added",
    "elementUri": "/engines/QSK19-28.RPM",
    "elementOldValue": "",
    "elementNewValue": "800"
  },
  {
    "id": 3291,
    "versionId": -1,
    "userId": "",
    "timestamp": "2016-04-13T10:18:43.296-07:00[America/Los_Angeles]",
    "reason": "",
    "action": "CREATE",
    "identifier": "/engines/QSK19-28",
    "eventId": "",
    "masterEventId": "",
    "otherInfo": "",
    "elementAction": "added",
    "elementUri": "/engines/QSK19-28.bore",
    "elementOldValue": "",
    "elementNewValue": "159"
  }
]</pre>

        </div>
<div class="section"><h2 class="title sectiontitle">GET Asset Records After Specified Date</h2>
            
            <p class="p">This example uses the <samp class="ph codeph">after</samp> parameter with a timestamp to retrieve the history for assets records  after a specified date.</p>

            <p class="p"><samp class="ph codeph"><var class="keyword varname">&lt;asset-app-url&gt;</var>/system/audit?filter=after=2016-01-01T10\:16\:42.016-07\:00[America/Los_Angeles]</samp>
      </p>

        </div>
<div class="section"><h2 class="title sectiontitle">Response</h2>
            
            <pre class="pre codeblock">[
  {
    "id": 789,
    "versionId": -1,
    "userId": "",
    "timestamp": "2016-04-13T10:16:42.016-07:00[America/Los_Angeles]",
    "reason": "",
    "action": "CREATE",
    "identifier": "/locomotives/89",
    "eventId": "",
    "masterEventId": "",
    "otherInfo": "",
    "oldValue": "{}",
    "newValue": "{\n  \"uri\": \"/locomotives/89\",\n  \"type\": \"Diesel-electric\",\n  \"model\": \"3GS21B-89\",\n  \"serial_no\": \"0086\",\n  \"emission_tier\": \"0+\",\n  \"fleet\": \"/fleets/cn-4\",\n  \"manufacturer\": \"/manufacturers/national-railway-equipment\",\n  \"engine\": \"/engines/QSK19-28\",\n  \"hqLatLng\": {\n    \"lat\": 46.244201,\n    \"lng\": -73.666786\n  },\n  \"parent\": \"/locomotives/88\",\n  \"installedOn\": \"05/12/2015\",\n  \"dateIso\": \"2015-12-05T13:15:31Z\"\n}"
  },
  {
    "id": 788,
    "versionId": -1,
    "userId": "",
    "timestamp": "2016-04-13T10:16:42.016-07:00[America/Los_Angeles]",
    "reason": "",
    "action": "CREATE",
    "identifier": "/locomotives/88",
    "eventId": "",
    "masterEventId": "",
    "otherInfo": "",
    "oldValue": "{}",
    "newValue": "{\n  \"uri\": \"/locomotives/88\",\n  \"type\": \"Diesel-electric\",\n  \"model\": \"3GS21B-88\",\n  \"serial_no\": \"0085\",\n  \"emission_tier\": \"0+\",\n  \"fleet\": \"/fleets/cn-4\",\n  \"manufacturer\": \"/manufacturers/national-railway-equipment\",\n  \"engine\": \"/engines/QSK19-27\",\n  \"hqLatLng\": {\n    \"lat\": 49.640363,\n    \"lng\": -126.242998\n  },\n  \"parent\": \"/locomotives/87\",\n  \"dateIso\": \"2015-11-05T13:15:30Z\"\n}"
  },
  {
    "id": 787,
    "versionId": -1,
    "userId": "",
    "timestamp": "2016-04-13T10:16:42.015-07:00[America/Los_Angeles]",
    "reason": "",
    "action": "CREATE",
    "identifier": "/locomotives/87",
    "eventId": "",
    "masterEventId": "",
    "otherInfo": "",
    "oldValue": "{}",
    "newValue": "{\n  \"uri\": \"/locomotives/87\",\n  \"type\": \"Diesel-electric\",\n  \"model\": \"3GS21B-87\",\n  \"serial_no\": \"0087\",\n  \"emission_tier\": \"0+\",\n  \"fleet\": \"/fleets/cn-4\",\n  \"manufacturer\": \"/manufacturers/national-railway-equipment\",\n  \"engine\": \"/engines/QSK19-26\",\n  \"hqLatLng\": {\n    \"lat\": 49.296307,\n    \"lng\": -118.827314\n  },\n  \"parent\": \"/locomotives/86\",\n  \"installedOn\": \"05/12/2014\",\n  \"dateIso\": \"2014-12-05T13:15:31Z\"\n}"
  },
  
    {
    ... SNIP
]</pre>

        </div>
<div class="section"><h2 class="title sectiontitle">GET Event History before a Specified Timestamp</h2>
      
      <div class="p">This example uses the <samp class="ph codeph">ebefore</samp> parameter and a timestamp to retrieve the event history for asset records with changes before a specified timestamp.  <pre class="pre codeblock"><var class="keyword varname">&lt;asset-app-url&gt;</var>/system/audit?filter=eBefore=2016-01-01T10\:16\:42.016-07\:00[America/Los_Angeles]</pre>
</div>

      <p class="p"> </p>

    </div>
<div class="section"><h2 class="title sectiontitle">Returns</h2>
      
      <pre class="pre codeblock">[
  {
    "id": 789,
    "versionId": -1,
    "userId": "",
    "timestamp": "2016-04-13T10:16:42.016-07:00[America/Los_Angeles]",
    "reason": "",
    "action": "CREATE",
    "identifier": "/locomotives/89",
    "eventId": "",
    "masterEventId": "",
    "otherInfo": "",
    "oldValue": "{}",
    "newValue": "{\n  \"uri\": \"/locomotives/89\",\n  \"type\": \"Diesel-electric\",\n  \"model\": \"3GS21B-89\",\n  \"serial_no\": \"0086\",\n  \"emission_tier\": \"0+\",\n  \"fleet\": \"/fleets/cn-4\",\n  \"manufacturer\": \"/manufacturers/national-railway-equipment\",\n  \"engine\": \"/engines/QSK19-28\",\n  \"hqLatLng\": {\n    \"lat\": 46.244201,\n    \"lng\": -73.666786\n  },\n  \"parent\": \"/locomotives/88\",\n  \"installedOn\": \"05/12/2015\",\n  \"dateIso\": \"2015-12-05T13:15:31Z\"\n}"
  }
]</pre>

    </div>
<div class="section"><h2 class="title sectiontitle">GET History by Specified Key Value</h2>
      
      <div class="p">This example retrieves the history for asset records matching the specified key value. The filter in this query looks for a specific user ID.<pre class="pre codeblock"><var class="keyword varname">&lt;asset-app-url&gt;</var>/system/audit?filter=userId=abc</pre>
</div>

      <p class="p"> </p>

    </div>
<div class="section"><h2 class="title sectiontitle">Returns</h2>
      
      <pre class="pre codeblock">[
  {
    "id": 539,
    "versionId": -1,
    "userId": "abc",
    "timestamp": "2016-04-11T13:14:31.632-07:00[America/Los_Angeles]",
    "reason": "xxx",
    "action": "CREATE",
    "identifier": "/assets/asset1",
    "eventTimestamp": "2016-03-25T06:10:36.661-07:00[America/Los_Angeles]",
    "eventId": "new equip2",
    "masterEventId": "new asset",
    "otherInfo": "yyy",
    "oldValue": "{}",
    "newValue": "{\n  \"uri\": \"/assets/asset1\",\n  \"description\": \"some asset 1\",\n  \"name\": \"asset1\"\n}"
  }
]</pre>

    </div>
</div>
<div class="navfooter"><!----></div><div class="footer"><a class="oxyFooter" href="" target="_blank"><span class="oXygenLogo"><img src="oxygen-webhelp/resources/img/GELogo1.jpg" height="36px" alt="General Electric"></img></span><span class="xmlauthor"> © 2015-2017 General Electric Company. All rights reserved.</span></a></div>
</body>
</html>