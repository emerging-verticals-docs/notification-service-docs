
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
<head><meta name="description" content="To use an OAuth2 client for secure access to your Predix Platform service instance from your application, you must update your OAuth2 client to add additional authorities or scopes that are specific ..."></meta><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><meta name="copyright" content="(C) Copyright 2005"></meta><meta name="DC.rights.owner" content="(C) Copyright 2005"></meta><meta name="DC.Type" content="task"></meta><meta name="DC.Title" content="Updating the OAuth2 Client for Services"></meta><meta name="abstract" content="To use an OAuth2 client for secure access to your Predix Platform service instance from your application, you must update your OAuth2 client to add additional authorities or scopes that are specific to each service."></meta><meta name="description" content="To use an OAuth2 client for secure access to your Predix Platform service instance from your application, you must update your OAuth2 client to add additional authorities or scopes that are specific to each service."></meta><meta name="DC.Creator" content="Your Name Here"></meta><meta name="DC.Format" content="XHTML"></meta><meta name="DC.Identifier" content="task_k3h_k2c_1x"></meta><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>Updating the OAuth2 Client for Services</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/skins/skin.css"><!----></link><script type="text/javascript"><!--
          
          var prefix = "index.html";
          
          --></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="task_k3h_k2c_1x">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td width="75%"></td><td><div class="navheader"></div></td></tr></tbody></table>
<h1 class="title topictitle1">Updating the OAuth2 Client for Services</h1>
<div class="body taskbody"><p class="shortdesc">To use an OAuth2 client for secure access to your Predix Platform service instance from your application, you must update your OAuth2 client to add additional authorities or scopes that are specific to each service.</p>
<div class="section context">
            
            <p class="p">To enable your application to access a platform service, your JSON Web Token (JWT) must contain the scopes required for a platform service. For example, some of the scope required for Access Control service are <samp class="ph codeph">acs.policies.read acs.policies.write</samp>. </p>

            <p class="p">The OAuth2 client uses an authorization grant to request an access token. Based on the type of authorization grant that you have used, you must update your OAuth2 client to generate the required JWT. For more information on how the OAuth2 client is created, see <a class="xref" href="t_creating_an_oauth_client.html#task_79a81b74-552e-4f74-abfc-bd37e6adac87" title="You can create OAuth2 clients with specific permissions for your application to work with Predix Platform services. Often this is the first step after creating an instance of a service.">Creating OAuth2 client</a>. </p>

            <p class="p">If you use the UAA Dashboard to create additional clients, the client is created for the default <samp class="ph codeph">client_credentials</samp> grant type. Some required authorities and scopes are automatically added to the client. You must add additional authorities or scopes that are specific to each service.</p>

            <p class="p">In addition, the admin client is not assigned the default authority to change the user password. To change the user password, you must add the <samp class="ph codeph">uaa.admin</samp> authority to your admin client. </p>

            <p class="p">Use the following procedure to update the OAuth2 client that uses the client credentials authorization grant.</p>

        </div>
<ol class="ol steps" id="task_k3h_k2c_1x__steps_e4q_4lb_1x"><li class="li step stepexpand"><span class="ph cmd">In the Console view, select the Space where your services are located.</span></li>
<li class="li step stepexpand"><span class="ph cmd">In the Services Instances page, select the UAA instance to configure.</span></li>
<li class="li step stepexpand"><span class="ph cmd">Select the <span class="ph uicontrol">Configure Service Instance</span> option.</span></li>
<li class="li step stepexpand"><span class="ph cmd">In the UAA Dashboard login page, specify your admin client secret and click <span class="ph uicontrol">Login</span>.</span></li>
<li class="li step stepexpand"><span class="ph cmd">In UAA Dashboard, select the <span class="ph uicontrol">Client Management</span> tab.</span><div class="itemgroup info">The Client Management tab has two sections, <span class="ph uicontrol">Clients</span> and <span class="ph uicontrol">Service Instances</span>. The <span class="ph uicontrol">Service Instances</span> section displays the service instances that you have created for your services.<div class="note note"><span class="notetitle">Note:</span> The service instances displayed here are the instances that you created using the UAA that you are trying to configure. The service instances that you created using some other UAA instance are not displayed on this page.</div>
</div></li>
<li class="li step stepexpand"><span class="ph cmd">In the <span class="ph uicontrol">Service Instances</span> section, click the <span class="ph uicontrol">+ Authorize Client</span> option in the service to update.</span></li>
<li class="li step stepexpand"><span class="ph cmd">Choose an existing client from the list or choose the <span class="ph uicontrol">Add a new client</span> option. If you chose to add a new client, follow the steps in <a class="xref" href="t_creating_an_oauth_client.html#task_79a81b74-552e-4f74-abfc-bd37e6adac87" title="You can create OAuth2 clients with specific permissions for your application to work with Predix Platform services. Often this is the first step after creating an instance of a service.">Creating an OAuth2 Client</a>.</span></li>
<li class="li step stepexpand"><span class="ph cmd">Click <span class="ph uicontrol">Submit</span>.</span></li>
<li class="li step stepexpand"><span class="ph cmd">In the <span class="ph uicontrol">Client Management</span> tab, click the edit icon corresponding to the client added in the previous step.</span></li>
<li class="li step stepexpand"><span class="ph cmd">Complete the <span class="ph uicontrol">Edit Client</span> form.</span><div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_k3h_k2c_1x__table_ehl_3rb_1x" class="table" frame="border" border="1" rules="all"><thead class="thead" align="left"><tr class="row"><th class="entry" valign="top" width="27.70083102493075%" id="d24531e133">Field</th>
<th class="entry" valign="top" width="72.29916897506925%" id="d24531e135">Description</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry" valign="top" width="27.70083102493075%" headers="d24531e133 "><span class="ph uicontrol">Authorized Grant Types</span></td>
<td class="entry" valign="top" width="72.29916897506925%" headers="d24531e135 ">Choose one or more of the following grant types:<ul class="ul" id="task_k3h_k2c_1x__ul_pyf_jnq_rw"><li class="li"><span class="ph uicontrol">authorization_code</span><p class="p">When you use the authorization code grant type, the client directs the resource owner to UAA, which in turn directs the resource owner back to the client with the authorization code. </p>
</li>
<li class="li"><span class="ph uicontrol">client_credentials</span><p class="p">When you use the client credentials grant type, the OAuth2 endpoint in UAA accepts the client ID and client secret and provides Access Tokens.</p>
</li>
<li class="li"><span class="ph uicontrol">password</span><p class="p">When you use the resource owner password credentials grant type, the OAuth2 endpoint in UAA accepts the username and password and provides Access Tokens.</p>
</li>
<li class="li"><span class="ph uicontrol">refresh_token</span><p class="p">The refresh tokens are credentials used to obtain access tokens. You can choose this option to obtain refresh token from UAA. You can then use the refresh token to obtain a new access token from UAA when the current access token becomes invalid or expires, or to obtain additional access tokens with identical or narrower scope.</p>
</li>
<li class="li"><span class="ph uicontrol">implicit</span><p class="p">When you use the implicit grant type, UAA directly issues an Access Token to the client without authenticating the client. This reduces the number of round trips required to obtain an access token. </p>
</li>
</ul>
<p class="p">For more information on grant types, see <a class="xref" href="https://tools.ietf.org/html/rfc6749" target="_blank">RFC 6749</a>.</p>
</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="27.70083102493075%" headers="d24531e133 "><span class="ph uicontrol">Redirect URI</span></td>
<td class="entry" valign="top" width="72.29916897506925%" headers="d24531e135 ">Specify a redirect URI to redirect the client after login (for example, <samp class="ph codeph">http://example-app.com/welcome</samp>).<p class="p">This URI is used when you start using UAA as service provider for your external Identify provider.</p>
</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="27.70083102493075%" headers="d24531e133 "><span class="ph uicontrol">Scopes</span></td>
<td class="entry" valign="top" width="72.29916897506925%" headers="d24531e135 ">By default, the client is assigned a few required scopes. For a new client, an administrator can select the scopes to be added based on the selected grant type.<p class="p">If you select the <samp class="ph codeph">authorization_code</samp>, <samp class="ph codeph">password</samp> and <samp class="ph codeph">implicit</samp> grant type, you must update the scopes with service specific scopes.</p>
<p class="p">For a complete list of required scopes, see <a class="xref" href="r_authorities_or_scopes_required_for_services.html#reference_ec1_t3d_bx">Authorities or Scopes Required for Platform Services</a>.</p>
<p class="p">For a list of available UAA scopes, see <a class="xref" href="https://github.com/GESoftware-CF/uaa/blob/master/docs/UAA-APIs.rst#scopes-authorized-by-the-uaa" target="_blank">Scopes Authorized by the UAA</a>.</p>
</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="27.70083102493075%" headers="d24531e133 "><span class="ph uicontrol">Authorities</span></td>
<td class="entry" valign="top" width="72.29916897506925%" headers="d24531e135 ">By default, the client is assigned a few required authorities. For a new client, an administrator can select the authorities to be added based on the selected grant type.<p class="p">If you select the <samp class="ph codeph">client_credentials</samp> grant type, you must update the authorities with service specific authorities.</p>
<p class="p">For a complete list of scopes to be added for each service, see <a class="xref" href="r_authorities_or_scopes_required_for_services.html#reference_ec1_t3d_bx">Authorities or Scopes Required for Platform Services</a>.</p>
<p class="p">For a list of available UAA authorities, see <a class="xref" href="https://github.com/GESoftware-CF/uaa/blob/master/docs/UAA-APIs.rst#scopes-authorized-by-the-uaa" target="_blank">Scopes Authorized by the UAA</a>.</p>
</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="27.70083102493075%" headers="d24531e133 "><span class="ph uicontrol">Auto Approved Scopes</span></td>
<td class="entry" valign="top" width="72.29916897506925%" headers="d24531e135 ">Specify scopes that can be approved automatically for the client without explicit approval from the resource owner.</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="27.70083102493075%" headers="d24531e133 "><span class="ph uicontrol">Allowed Providers</span></td>
<td class="entry" valign="top" width="72.29916897506925%" headers="d24531e135 ">Specify the names of the external identity providers, if any. This field is required if you are using external identity providers with UAA as a service provider.</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="27.70083102493075%" headers="d24531e133 "><span class="ph uicontrol">Access Token Validity</span></td>
<td class="entry" valign="top" width="72.29916897506925%" headers="d24531e135 ">Specifies the access token expiration time in ms. </td>
</tr>
<tr class="row"><td class="entry" valign="top" width="27.70083102493075%" headers="d24531e133 "><span class="ph uicontrol">Refresh Token Validity</span></td>
<td class="entry" valign="top" width="72.29916897506925%" headers="d24531e135 ">Specifies the refresh token expiration time in ms.</td>
</tr>
</tbody>
</table>
</div>

                </div></li>
</ol>
<div class="section postreq">
            <p class="p">You can complete the following additional tasks in UAA Dashboard:</p>

            <ul class="ul" id="task_k3h_k2c_1x__ul_f3q_2js_rx"><li class="li">If you are using authorization grant type as Authorization Code, Implicit, or Resource Owner Password, you can manage users in UAA. </li>
<li class="li">You can <a class="xref" href="t_creating_password_policy.html#task_gdk_f43_fx" title="You can configure the settings for clients in UAA for password policy such as length, accepted or required character types, expiration times, and reset policy.">create password policies</a> for user passwords.</li>
<li class="li">You can set up external identity provider or use UAA as an identity provider. See <a class="xref" href="c_saml_federation_using_uaa.html#concept_pl1_4b1_cw">Managing Identity Providers</a>.</li>
</ul>

            <p class="p">If you have completed your OAuth2 client setup, you can <a class="xref" href="t_connecting_your_app_to_a_platform_service_instance.html#task_2e2b8b0f-9a72-41d2-be37-273f01f8e47f" title="To establish communication between the service instance that you have created and your application, you bind your application to the service instance.">bind your application to your service instance</a>.</p>

        </div>
</div>
<div class="navfooter"><!----></div><div class="footer"><a class="oxyFooter" href="" target="_blank"><span class="oXygenLogo"><img src="oxygen-webhelp/resources/img/GELogo1.jpg" height="36px" alt="General Electric"></img></span><span class="xmlauthor"> © 2015-2017 General Electric Company. All rights reserved.</span></a></div>
</body>
</html>